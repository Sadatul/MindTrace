@echo off
echo [INFO] Starting backend process...

REM This command ensures the Docker container for the database is running.
cd backend
echo [INFO] Starting Docker container...
docker compose up -d

echo [INFO] Waiting a few seconds for the database to initialize...
timeout /t 10 /nobreak >nul

REM --- IMPORTANT: EDIT THE VALUES BELOW ---
echo [INFO] Setting environment variables...
set AZURE_OPENAI_ENDPOINT=https://20050-mbh8dcre-eastus2.cognitiveservices.azure.com/
set AZURE_OPENAI_KEY=FpO0KUNvxMHPmyOBjzD580Sdrb5TndFc6tCmxaxAGsnHiVu3HzkGJQQJ99BFACHYHv6XJ3w3AAAAACOGHssY
set DB_PASSWORD=software
set DB_URL=localhost:5432/software
set DB_USERNAME=software
set EMAIL_PASSWORD=graneropemwbqghy
set FIREBASE_CREDENTIAL=ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAidGVzdC1hdXRoLWNhMjhjIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiYmU3MzczN2QwNjcwNTIzMjZlZTcyZTc1YzNiOWM2MjBmYWM1OWQ2MiIsCiAgInByaXZhdGVfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFEMk9HeVZzWHlueTN4RVxuSndyaFlJc2FNWlhSMlc0WDA4Tks1KzBLSXkxb2ZCd1J1cS9tRDQ5ZG1odThXSWRYUUpjRFlSR3M3azdLOWhvTVxuK2ZTWlZWN0VQV1cwUjJ5aHJKaVJpaU9IcFIrNGdGOEdBVWRIZXNVbnpwUGVwZVk3RkU2ZXBpQmxZK1VHYUZnTVxudjdZQlRUZ2syQldDU3FFK2xiMEN3d0g0a2wwNlZpSWZLVVBXcU15Z2x3TDRrZ2FUWmROUTNHeHB4Q3FLdGg4R1xuOW44SzlsVnk0R3g2UGNxWk1qcFFuL3BoTU5pbHI0amErd3BFU0RjZld1SzhXTmVOdDZVaVMzRTVVVjdWYU9GWlxudzNGcWxYMk9hMTJRZHE3bEc0QkZMaDBSTUtjY3pQV21LUmlwWkZhZU1uTitObHpzSjRUNXZVZ3JzRlUzSDVIT1xuM0pHczJkdEpBZ01CQUFFQ2dnRUFDMG9wQ0hBYjlDR3JjQUNPU2lsQUY1SmdlVC9NQVlHdk9iY0tzbVZNaHJieVxuSG9uOTJNR3I1REhWeGJ3VmNKWEFsdUlUaW1kZTY0Vi9Ta3NId1NRZDlVZVBhMFcvSUdhbWxEM09SVUQ0QkdDMlxuZXJNQ1RxKzliSWJYVnVVck5paEhOcFVOZFRpd1hxdllKYldBcGV5aGYyYjlEWDFZaVdNYVNJOGlmd0JQRUFhZVxuQVNhZTMyc0tKcWlFMlpWOWYweVZzbTlVMjNYTEVmWms5c0RUQ0tqdGNTM0xTSTVzTDdndVNMYWpiVmxxQm5xdFxuTmprTTBPanNNUE5wR3ZDR2hNRTg1MXRDUExUbnlEUktXUzUwMnQzb29rdHpURnlxREJ3R1o4Z283bmhEa1ZnVVxuc2ViR3NGVjFrbDVkY3hHUTdlUU14dVhjOGlsOE85U1FUc2lDSms0M1JRS0JnUUQrNUtaU0ZZZk00UXI0REY4elxuMDBXVVZHM3JyL3dQVHQzRkxia2EwRitWbnErYXdCaU55eVYyY0NGL3ZmUUgxaHVLQitodDZZclZXeTVRbktTdlxueldCUlgvbWZuSjZnS1pXaXovMlhpdHQ5TENWRDc5WUxRWVlOM1RhOWFtTTRlVHVVaXlNYmlxSzNnc0ljSXNoV1xuUHRzTnlrZlAwZXFHWE1zTGVySEJLV3M1L3dLQmdRRDNTaUlxTzZRNisyRWw2MmNmc2p1WHdQYzF4bXQxVFVVUFxudURRZnNacStvSXRzWjU2K0J5NlY5OElHR05DdENpRkUzRUJGSHphWnYyL3p6dmxLcCtsMW5WVXRCbjVsUzg3d1xuQ1dmM2xBTDN3eUVUbUVncy9KcENTaG5taW9DV0hhMVJtaXlIdDVPMkg1NWNMUldZL3l0YXZHVmgyNmNhL0szMlxud0hZTFQ3Q2F0d0tCZ1FEM0kwMGI4Mkk3Uk11MDI1SUhGc2EwM2ZQQi9GMEJucThwK240cVFIVWRCY0l2NGljc1xuZkJaenNwN1lVNTNqWnpaR2JBcHhYMnBNR2Q5Yks3WUYrclJ6MGdHZlAyVVIxNkFOUDJzYTN2aVhjaEVqd013aFxuRjhQWmQyNFcwNnNtVzIxb1JrdWc3WmQ5Skp2K1diOHkyRGplTXczVHN5MllYeXBEbEEvN1FLU0Zrd0tCZ1FDeVxudHNYWUpjQTd6QjVhYkRUYjZGQS9EUHJieHlrejNnTHlLRnFyS1F5L2hZRWRlQWwySmZTWjl6TW1ldHFjbzd5RlxuYW5PY1FNR1IvWk1uN1VXbW1aRVVLZjg3aWZ6Z3NoZTh5OTl5UW1xZXFrdUdRTUN3bW1IVlZINUJhWWtpZEJJa1xuN2pvT1h6S0dKWFdxQWY4ZzBoQ0FBN1YxTW13akNjZWprMVg4T0x4V0l3S0JnRFREM1FJQk03VXhpZ0Z1U0FCQ1xuMzRodlBKOFFMdGMwK1lISVA3R1VvRmxDT1hYK2RLTkxkTVFFencySDMzc2lxYWt0WlZBNk9tWm5FNUw4MnVpNFxuSG5XY2NEWUJMeU1OQmhsOTRHTDNJZmZ5UmE5VEg2N25TUWNMdUt6ZUh2SzFkWFlRdUpEd2s2MGxGZlArNzRQT1xudEJsYklGV1g2cjM1MG5QNDRIR2tFalMyXG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLAogICJjbGllbnRfZW1haWwiOiAiZmlyZWJhc2UtYWRtaW5zZGsteTVqMWVAdGVzdC1hdXRoLWNhMjhjLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwKICAiY2xpZW50X2lkIjogIjExMDk3Njg0MzY5OTE4NDU1MjExOCIsCiAgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwKICAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvZmlyZWJhc2UtYWRtaW5zZGsteTVqMWUlNDB0ZXN0LWF1dGgtY2EyOGMuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0=
set QDRANT_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.WG3pg95zVbs2pIWVt9wCI44J6uwF43Bd4nq0_tbudyM
set QDRANT_HOST=a761887f-5ef0-4067-8389-b4a8529ae643.us-east-1-0.aws.cloud.qdrant.io
set REDIS_HOST=redis-14237.c56.east-us.azure.redns.redis-cloud.com
set REDIS_PASSWORD=8TshTsAwC7RwRDGcwvRqGYde5GuwoMVD
set REDIS_PORT=14237
set REDIS_USER=default

echo [INFO] Environment variables are set.
echo [INFO] Starting the Spring Boot application. This may take a few minutes...
call mvnw.cmd spring-boot:run

echo [INFO] Application has stopped.
pause